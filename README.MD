# Проект ETL Pipeline

## Описание

Этот проект реализует ETL (Extract, Transform, Load) Pipeline с использованием Apache Airflow для управления процессами данных между MongoDB, PostgreSQL и ClickHouse. Основные цели проекта — генерация тестовых данных, их репликация между базами данных и создание аналитических витрин.

### 1. Генерация данных
- Создайте нереляционную базу данных MongoDB и заполните её следующими сущностями:

#### Сущности MongoDB:

1. UserSessions (Сессии пользователей): Данные о сессиях пользователей
   - session_id: Уникальный идентификатор сессии
   - user_id: Идентификатор пользователя
   - start_time: Время начала сессии
   - end_time: Время завершения сессии
   - pages_visited: Массив посещённых страниц
   - device: Информация об устройстве
   - actions: Массив действий пользователя

2. ProductPriceHistory (История изменения цен): Данные об изменении цен на товары
   - product_id: Идентификатор товара
   - price_changes: Массив изменений цен с датами
   - current_price: Текущая цена
   - currency: Валюта

3. EventLogs (Логи событий): Данные о событиях
   - event_id: Уникальный идентификатор события
   - timestamp: Время события
   - event_type: Тип события
   - details: Подробности события

4. SupportTickets (Обращения в поддержку): Данные о запросах в поддержку
   - ticket_id: Уникальный идентификатор тикета
   - user_id: Идентификатор пользователя
   - status: Статус тикета
   - issue_type: Тип проблемы
   - messages: Массив сообщений
   - created_at: Время создания тикета
   - updated_at: Время последнего обновления тикета

5. UserRecommendations (Рекомендации пользователям): Рекомендации для пользователей
   - user_id: Идентификатор пользователя
   - recommended_products: Массив рекомендованных товаров
   - last_updated: Время последнего обновления рекомендаций

6. ModerationQueue (Очередь модерации): Данные о модерации отзывов
   - review_id: Идентификатор отзыва
   - user_id: Идентификатор пользователя
   - product_id: Идентификатор товара
   - review_text: Текст отзыва
   - rating: Оценка
   - moderation_status: Статус модерации
   - flags: Массив флагов
   - submitted_at: Время, когда был оставлен отзыв

7. SearchQueries (Поисковые запросы): Данные о поисковых запросах пользователей
   - query_id: Уникальный идентификатор запроса
   - user_id: Идентификатор пользователя
   - query_text: Текст запроса
   - timestamp: Время запроса
   - filters: Применённые фильтры
   - results_count: Количество найденных результатов

### 2. Репликация данных
- Настройте репликацию сгенерированных данных из MongoDB в PostgreSQL с использованием Apache Airflow.
- Убедитесь в целостности данных и проверьте процесс репликации.

## Дополнительное задание (по желанию для получения максимального балла)

### 1. Построение аналитических витрин
- Создайте не менее двух аналитических витрин в PostgreSQL на основе данных:
  - Витрина активности пользователей: Анализ поведения пользователей в сервисе.
  - Витрина эффективности работы поддержки: Оценка работы команды поддержки.

### 2. Использование Airflow
- Настройте пайплайны для репликации данных и создания аналитических витрин.

## Начало работы

Чтобы настроить окружение, убедитесь, что у вас есть следующие предварительные требования:
- Docker 20.10+
- Docker Compose 2.0+

### Установка

Клонируйте репозиторий и выполните настройку с помощью Docker Compose:

git clone https://github.com/вашеимя/etl.git
cd etl
docker-compose up --build


## Доступ к сервисам

Сервисы будут доступны через несколько минут после настройки. Порт по умолчанию:

- Airflow UI: http://localhost:8080
- PostgreSQL: 5432
- MongoDB: 27017
- ClickHouse: 8123

## Участие

Пожалуйста, не стесняйтесь сообщать о проблемах или делать запросы на добавление, чтобы улучшить проект. Ваши вклады приветствуются!
